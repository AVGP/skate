!function(a){"use strict";function b(a){a.selector=(g[a.animationName]||{}).selector,(i[a.animationName]||[]).forEach(function(b){b(a.target)})}function c(a,c){var d=h[a];if(d)++g[d].count;else{d=h[a]="skate-"+k.childNodes.length;var e=document.createTextNode("@"+(o.keyframes?o.css:"")+"keyframes "+d+" { from { opacity: 0; } to { opacity: 1; } }");k.appendChild(e),j.sheet.insertRule(a+o.properties.replace(/skate/g,d),0),g[d]={count:1,selector:a,keyframe:e,rule:j.sheet.cssRules[0]}}i.count?++i.count:(i.count=1,m.forEach(function(a){document.addEventListener(a,b,!1)},this)),(i[d]=i[d]||[]).push(c)}function d(a,b){for(var c=document.querySelectorAll(a),d=0;d<c.length;d++)b(c[d]);document.addEventListener("DOMNodeInserted",function(c){c.target.msMatchesSelector(a)&&b(c.target)},!1)}function e(a,b){var c={};return c.destroy||(c.destroy=function(){}),c.elements=function(){return Array.prototype.slice.call(document.querySelectorAll(a)||[])},c.destroy=function(){return f(a,b),this},c}function f(a,c){var d=h[a],e=i[d]||[],f=e.indexOf(c);if(f>-1){var l=g[h[a]];--l.count,l.count||(j.sheet.deleteRule(j.sheet.cssRules.item(l.rule)),k.removeChild(l.keyframe),delete g[d],delete h[a]),--i.count,e.splice(f,1),i.count||m.forEach(function(a){document.removeEventListener(a,b,!1)},this)}}var g={},h={},i={},j=document.createElement("style"),k=document.createElement("style"),l=document.getElementsByTagName("head")[0],m=["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],n=["Webkit","Moz","O","ms","Khtml"],o=function(){var a="animation-duration: 0.01s;",b="animation-name: skate !important;",c=window.getComputedStyle(document.documentElement,""),d=(Array.prototype.slice.call(c).join("").match(/moz|webkit|ms/)||""===c.OLink&&["o"])[0];return{css:"-"+d+"-",properties:"{"+a+b+"-"+d+"-"+a+"-"+d+"-"+b+"}",keyframes:!(!window.CSSKeyframesRule&&!window["WebKit|Moz|MS|O".match(new RegExp("("+d+")","i"))[1]+"CSSKeyframesRule"])}}(),p=function(){var a="animation",b=document.documentElement,c="",d="";if(void 0!==b.style.animationName)return!0;for(var e=0;e<n.length;e++)if(void 0!==b.style[n[e]+"AnimationName"])return d=n[e],a=d+"Animation",c="-"+d.toLowerCase()+"-",!0}();p&&(j.type=k.type="text/css",l.appendChild(j),l.appendChild(k)),a(function(a,b){var f=e(a,b);return p?c(a,b):d(a,b),f})}(function(a){"function"==typeof define&&define.amd?define("skate",function(){return a}):window.skate=a});