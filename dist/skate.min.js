!function(){"use strict";function a(a,c){return new b(a,c)}function b(b,c){"function"==typeof c&&(c={insert:c}),this.component=c,this.id=b,j(this.component,a.defaults),this.component.ready&&a.hide(this.id),this.component.listen&&this.listen()}function c(a,b){function c(){a.component.attrs&&s.addAttributeListener(a,b),d(a,b)}var e=/^[^(]+\([^,)]+,/,f=a.component.ready;b.__skates&&-1!==b.__skates.indexOf(a)||(b.__skates||(b.__skates=[]),b.__skates.push(a),j(b,a.component.extend),f&&e.test(f)?f(b,c):f?(f(b),c()):c())}function d(a,b){var c=a.component.insert;h(b,r),c&&c(b)}function e(b){a.listener(b,function(a){a.component.attrs&&s.removeAttributeListener(a,b),a.component.remove&&a.component.remove(b)})}function f(){var b=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver;if(b){var c=new b(function(b){b.forEach(function(b){b.addedNodes&&a.init(b.addedNodes),b.removedNodes&&e(b.removedNodes)})});return c.observe(document,{childList:!0,subtree:!0}),{addAttributeListener:function(a,c){var d={},e=new b(function(b){b.forEach(function(b){var e,f,g=b.attributeName,h=c.attributes[g],i=a.component.attrs[g];return i?(e=d[g],h&&(f=d[g]=h.nodeValue),h&&void 0===e&&(i.init||i.update)?void(i.init||i.update)(c,f):h&&void 0!==e&&i.update?void i.update(c,f,e):void(!h&&i.remove&&(i.remove(c,e),delete d[g]))):void 0})});e.observe(c,{attributes:!0})},removeAttributeListener:function(){}}}}function g(){document.addEventListener("DOMNodeInserted",function(b){a.init(b.target)}),document.addEventListener("DOMNodeRemoved",function(a){e(a.target)});var b={1:function(a,b,c){a.update(b,c.newValue,c.prevValue)},2:function(a,b,c){(a.init||a.update)(b,c.newValue)},3:function(a,b,c){a.remove(b,c.prevValue)}};return{addAttributeListener:function(a,c){c.addEventListener("DOMAttrModified",function(d){var e=a.component.attrs[d.attrName];e&&b[d.attrChange](e,c,d)})},removeAttributeListener:function(){}}}function h(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function i(a,b){var c=k(a);return c.forEach(function(a,d){c[d]+=b}),c.join(",")}function j(a,b){for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c])}function k(a){var b=a.split(",");return b.forEach(function(a,c){b[c]=a.replace(/^\s+/,"").replace(/\s+$/,"")}),b}function l(a){return a&&a.nodeType&&1===a.nodeType}function m(a,b){a=o(a);for(var c=0;c<a.length;c++){var d=a[c];l(d)&&b(d,c)}}function n(a){return a.nodeName&&a.nodeName.toLowerCase()}function o(a){return a?"string"==typeof a||"number"!=typeof a.length?[a]:a:[]}{var p=document.getElementsByTagName("head")[0],q=document.createElement("style"),r="_skate",s=f()||g(),t=["moz","ms","o","webkit"];!function(){var a=Element.prototype.matches;return t.some(function(b){var c=b+"MatchesSelector";return Element.prototype[c]?(a=c,!0):void 0}),function(b,c){return b&&1===b.nodeType&&b[a](c)}}()}a.defaults={attributes:!1,extend:{},listen:!0},a.listeners=[],a.init=function(b){return m(b,function(b){var c=b.nodeName.toLowerCase(),d=a.listeners[c];d&&d.init(b)}),b},a.destroy=function(){return Object.keys(a.listeners).forEach(function(b){a.listeners[b].deafen()}),a},a.hide=function(b){var c=["position: absolute !important","clip: rect(0, 0, 0, 0)"];return q.sheet.insertRule(i(b,":not(."+r+")")+"{"+c.join(";")+"}",q.sheet.cssRules.length),a},a.listener=function(b,c){var d=a.listeners[n(b)];return d&&c(d),a},b.prototype={init:function(a,b){var d=this;return m(a,function(a){(b||d.matches(a))&&c(d,a)}),this},matches:function(a){return n(a)===this.id},listen:function(){if(a.listeners[this.id])throw new Error('Listener for "'+this.id+'" already registered.');return a.listeners[this.id]=this,this.init(document.querySelectorAll(this.id),!0),this},deafen:function(){return delete a.listeners[this.id],this}},p.appendChild(q),"function"==typeof define&&define.amd?define("skate",function(){return a}):window.skate=a}();