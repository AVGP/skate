!function(){"use strict";function a(a,c){return new b(a,c)}function b(a,b){this.selector=a,this.adapter=new v(a),this.listening=!1,this.removeListener=null,this.elements=[],this.events={ready:[],insert:[],remove:[]},"function"==typeof b&&(b={ready:b}),void 0===b.listen&&(b.listen=!0),this.component=b,b.listen&&this.listen()}function c(a,b){function c(c){c&&(b.parentNode.insertBefore(c,b),b.parentNode.removeChild(b),b=c),d(a,b)}var e=a.component.ready,f=/^[^(]+\([^,]+,/;e&&f.test(e)?e(b,c):e?(e(b),c()):c()}function d(a,b){h(b),a.elements.push(b),a.component.inserted&&a.component.inserted(b)}function e(a){this.index=null,this.name=null,this.selector=a,g(this.selector)}function f(a){this.listener=null,this.selector=a,g(a)}function g(a){var b=a.split(","),c=["height: 0 !important","width: 0 !important","overflow: hidden !important","margin: 0 !important","padding: 0 !important"];for(var d in b)b[d]+=":not(."+n+")";m.sheet.insertRule(b.join(",")+"{"+c.join(";")+"}",m.sheet.cssRules.length)}function h(a){a.className+=" "+n}function i(){j.appendChild(k),j.appendChild(l),r.forEach(function(a){document.addEventListener(a,function(a){t[a.animationName](a.target)},!1)})}var j=document.getElementsByTagName("head")[0],k=document.createElement("style"),l=document.createElement("style"),m=document.createElement("style"),n="__skate",o=["moz","ms","o","webkit"],p=function(){var a=0,b=["ms","moz","webkit","o"];if(window.requestAnimationFrame)return window.requestAnimationFrame;for(var c=0;c<b.length;++c){var d=b[c]+"RequestAnimationFrame";if("function"==typeof window[d])return window[d]}return window.requestAnimationFrame?void 0:function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}}();p.end=function(){return window.cancelAnimationFrame?window.cancelAnimationFrame:function(a){clearTimeout(a)}}(),p.repeat=function(a){var b=function(){return a(),p(b)};return b()},b.prototype={listen:function(){if(this.listening)return this;var a=this;return this.listening=!0,this.adapter.listen(function(b){c(a,b)}),this.component.removed&&(this.removeListener=p.repeat(function(){for(var b=a.elements.length-1;b>-1;b--){var c=a.elements[b];c.parentNode||(a.elements.splice(b,1),a.component.removed(c))}})),this},deafen:function(){return this.listening?(this.adapter.deafen(),this.listening=!1,this.removeListener&&p.end(this.removeListener),this):this}};var q=0,r=["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],s="__skate",t={},u=function(){var a=document.documentElement.style,b=!1;return"undefined"!=typeof a.animation?"":(o.some(function(c){return"undefined"!=typeof a[c+"Animation"]?(b=c,!0):void 0}),b)}();e.prototype={constructor:e,listen:function(a){var b="-"+u+"-";return this.index=q,this.name=s+q,t[this.name]=a,k.sheet.insertRule("@"+b+"keyframes "+this.name+"{from{opacity:1}to{opacity:1}}",this.index),l.sheet.insertRule(this.selector+"{"+b+"animation:"+this.name+" .01s}",this.index),++q,this},deafen:function(){return k.sheet.deleteRule(k.sheet.cssRules.item(this.index)),l.sheet.deleteRule(l.sheet.cssRules.item(this.index)),delete t[this.name],this.index=null,this.name=null,--q,this}},f.prototype={constructor:f,listen:function(a){var b=this,c=document.querySelectorAll(this.selector);this.listener=function(c){c.target.msMatchesSelector(b.selector)&&a(c.target)};for(var d=0;d<c.length;d++)this.listener({target:c[d]});return document.addEventListener("DOMNodeInserted",this.listener,!1),this},deafen:function(){return document.removeEventListener("DOMNodeInserted",this.listener),this.listener=null,this}};var v=function(){return u?e:f}();v===e&&i(),j.appendChild(m),"function"==typeof define&&define.amd?define("skate",function(){return a}):window.skate=a}();