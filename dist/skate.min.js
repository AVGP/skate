!function(){"use strict";function a(a,f){return a?1===a.nodeType?d(a):"string"==typeof a&&1===arguments.length?e(a):"string"!=typeof a&&"number"==typeof a.length?c(a):new b(a,f):void 0}function b(b,c){this.elements=[],this.selector=b,"function"==typeof c&&(c={insert:c}),q(this.component=c,a.defaults),c.ready&&m(b),c.listen&&this.listen()}function c(a){return[].slice.call(a).forEach(function(a){d(a)})}function d(b){return a.instances.forEach(function(a){a.matches(b)&&f(a,b)}),b}function e(a){return c(document.querySelectorAll(a))}function f(a,b){function c(c){c&&(a.elements.splice(f,1,b),b.parentNode.insertBefore(c,b),b.parentNode.removeChild(b),q(b=c,a.component.extend)),g(a,b)}var d=/^[^(]+\([^)]+\)/,e=a.component.ready,f=a.elements.length;a.elements.indexOf(b)>-1||(a.elements.push(b),q(b,a.component.extend),e&&d.test(e)?e.call(b,c):e?(e.call(b),c()):c())}function g(a,b){var c=a.component.insert;o(b,t),c&&c.call(b)}function h(b){a.find(b).forEach(function(a){a.component.remove&&a.component.remove.call(b)})}function i(){var b=new x(function(b){b.forEach(function(b){a(b.addedNodes),b.removedNodes&&[].slice.call(b.removedNodes).forEach(function(a){h(a)})})});b.observe(document,{childList:!0,subtree:!0})}function j(){document.addEventListener("DOMNodeInserted",function(b){a(b.target)}),document.addEventListener("DOMNodeRemoved",function(a){h(a.target)})}function k(){z.innerHTML=E.join(",")+"{"+D+"animation: "+B+" .01s}"}function l(){return r.appendChild(y),r.appendChild(z),y.innerHTML="@"+D+"keyframes "+B+"{from{opacity:1}to{opacity:1}}",A.forEach(function(b){document.addEventListener(b,function(b){b.animationName===B&&a(b.target)})}),{timeout:!1,listen:function(a){n(a.selector).forEach(function(a){-1===E.indexOf(a)&&E.push(a)}),k(),a.component.remove&&(this.timeout=w.repeat(function(){for(var b=a.elements.length-1;b>-1;b--){var c=a.elements[b];c.parentNode||(a.elements.splice(b,1),a.component.remove.call(c))}}))},deafen:function(a){n(a.selector).forEach(function(a){var b=E.indexOf(a);-1!==b&&E.splice(b,1)}),k(),this.timeout&&w.end(this.timeout)}}}function m(a){var b=["position: absolute !important","clip: rect(0, 0, 0, 0)"];s.sheet.insertRule(p(a,":not(."+t+")")+"{"+b.join(";")+"}",s.sheet.cssRules.length)}function n(a){var b=a.split(",");return b.forEach(function(a,c){b[c]=a.replace(/^\s+/,"").replace(/\s+$/,"")}),b}function o(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function p(a,b){var c=n(a);return c.forEach(function(a,d){c[d]+=b}),c.join(",")}function q(a,b){for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c])}var r=document.getElementsByTagName("head")[0],s=document.createElement("style"),t="skate",u=["moz","ms","o","webkit"],v=function(){var a=Element.prototype.matches;return u.some(function(b){var c=b+"MatchesSelector";return Element.prototype[c]?(a=c,!0):void 0}),function(b,c){return b&&1===b.nodeType&&b[a](c)}}(),w=function(){var a=0,b=["ms","moz","webkit","o"];if(window.requestAnimationFrame)return window.requestAnimationFrame;for(var c=0;c<b.length;++c){var d=b[c]+"RequestAnimationFrame";if("function"==typeof window[d])return window[d]}return window.requestAnimationFrame?void 0:function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}}();w.end=function(){return window.cancelAnimationFrame?window.cancelAnimationFrame:function(a){clearTimeout(a)}}(),w.repeat=function(a){var b=function(){return a(),w(b)};return b()},a.defaults={extend:{},listen:!0},a.instances=[],a.destroy=function(){for(var b=a.instances.length-1;b>=0;b--)a.instances[b].deafen();return a},a.find=function(b){var c=[];return a.instances.forEach(function(a){a.matches(b)&&c.push(a)}),c},b.prototype={matches:function(a){return v(a,this.selector)},listen:function(){return-1===a.instances.indexOf(this)&&(a.instances.push(this),F.listen(this),a(this.selector)),this},deafen:function(){return-1!==a.instances.indexOf(this)&&(a.instances.splice(a.instances.indexOf(this),1),F.deafen(this)),this}};var x=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver,y=document.createElement("style"),z=document.createElement("style"),A=["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],B="__skate",C=function(){var a=document.documentElement.style,b=!1;return"undefined"!=typeof a.animation?"":(u.some(function(c){return"undefined"!=typeof a[c+"Animation"]?(b=c,!0):void 0}),b)}(),D=C?"-"+C+"-":"",E=[],F=function(){return x?i():C?l():j()}()||{};F.listen=F.listen||function(){},F.deafen=F.deafen||function(){},r.appendChild(s),"function"==typeof define&&define.amd?define("skate",function(){return a}):window.skate=a}();