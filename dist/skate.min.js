!function(){"use strict";function a(a,c){return new b(a,c)}function b(a,b){this.adapter=new u(this),this.removeListener=!1,this.removeRegistry=[],this.selector=a,this.events={ready:[],insert:[],remove:[]},b&&this.add(b).listen()}function c(a){this.skate=a,this.events={},this.listeners={},this.selectors={}}function d(a){g(p[a.animationName.replace(r,"")],a.target)}function e(){m.type=l.type="text/css",k.appendChild(l),k.appendChild(m),q.forEach(function(a){document.addEventListener(a,d,!1)})}function f(a){this.skate=a}function g(a,b){-1===t.indexOf(b)&&(t.push(b),a.skate.trigger("ready",b),b.setAttribute("data-skate",j++),a.skate.trigger("insert",b))}function h(a){var b=a.split(","),c=["height: 0 !important","width: 0 !important","overflow: hidden !important","margin: 0 !important","padding: 0 !important"];for(var d in b)b[d]+=":not([data-skate])";n.sheet.insertRule(b.join(",")+"{"+c.join(";")+"}",n.sheet.cssRules.length)}var i=["moz","ms","o","webkit"],j=0,k=document.getElementsByTagName("head")[0],l=document.createElement("style"),m=document.createElement("style"),n=document.createElement("style"),o=function(){var a=0,b=["ms","moz","webkit","o"];if(window.requestAnimationFrame)return window.requestAnimationFrame;for(var c=0;c<b.length;++c){var d=b[c]+"RequestAnimationFrame";if("function"==typeof window[d])return window[d]}return window.requestAnimationFrame?void 0:function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}}();o.end=function(){return window.cancelAnimationFrame?window.cancelAnimationFrame:function(a){clearTimeout(a)}}(),o.repeat=function(a){var b=function(){return a(),o(b)};return b()},b.prototype={add:function(a){"function"==typeof a&&(a={ready:a});for(var b in this.events)this.events.hasOwnProperty(b)&&a[b]&&this.on(b,a[b]);return this},remove:function(a){"function"==typeof a&&(a={ready:a});for(var b in this.events)this.events.hasOwnProperty(b)&&a[b]&&this.off(b,a[b]);return this},on:function(a,b){var c=this;return this.events[a].push(b),"remove"!==a||this.removeListener||(this.removeListener=o.repeat(function(){for(var a=c.removeRegistry.length-1;a>-1;a--){var b=c.removeRegistry[a];b.parentNode||(c.removeRegistry.splice(a,1),c.trigger("remove",b))}})),this},off:function(a,b){return b?this.events[a].splice(this.events[a].indexOf(b),1):this.events[a]=[],"remove"!==a||this.events.remove.length||o.end(this.removeListener),this},listen:function(){return this.adapter.listen(),this},deafen:function(){return this.adapter.deafen(),this.removeListener&&o.end(this.removeListener),this},trigger:function(a,b){return"insert"===a&&this.removeRegistry.push(b),this.events[a].forEach(function(a){a(b)}),this}};var p=[],q=["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],r="__skate",s=function(){var a=document.documentElement.style,b=!1;return"undefined"!=typeof a.animation?"":(i.some(function(c){return"undefined"!=typeof a[c+"Animation"]?(b=c,!0):void 0}),b)}();c.prototype={constructor:c,listen:function(){p.push(this);var a=l.sheet.cssRules.length,b=r+a,c="-"+s+"-";return l.sheet.insertRule("@"+c+"keyframes "+b+"{from{opacity:1}to{opacity:1}}",a),m.sheet.insertRule(this.skate.selector+"{"+c+"animation:"+b+" .01s}",a),h(this.skate.selector),this},deafen:function(){var a=p.indexOf(this);return-1!==a&&(p.splice(a,1),l.sheet.deleteRule(l.sheet.cssRules.item(a)),m.sheet.deleteRule(m.sheet.cssRules.item(a))),this}},f.prototype={constructor:f,listen:function(){for(var a=this,b=document.querySelectorAll(this.skate.selector),c=0;c<b.length;c++)g(this,b[c]);return document.addEventListener("DOMNodeInserted",function(b){b.target.msMatchesSelector(a.skate.selector)&&g(a,b.target)},!1),this},deafen:function(){return this}};var t=[],u=function(){return s?c:f}();u===c&&e(),k.appendChild(n),"function"==typeof define&&define.amd?define("skate",function(){return a}):window.skate=a}();