!function(){"use strict";function a(a,c){var d=new b(a,c),e=function(){var b=document.createElement(a);return d.init(b),b};return e.listener=d,e}function b(b,c){c||(c={}),"function"==typeof c&&(c={insert:c}),this.component=c,this.id=b,p(this.component,a.defaults),this.component.ready&&o(this.id),this.component.listen&&this.listen()}function c(a,b){d(a,b,function(){e(a,b)})}function d(a,b,c){var d=/^[^(]+\([^,)]+,/,e=a.component,f=e.ready;return c=c||function(){},b[A]||(b[A]=[]),b[A].indexOf(a.id)>-1?c():(b[A].push(a.id),p(b,e.extend),e.attrs&&z.addAttributeListener(b,e.attrs),void(f&&d.test(f)?f(b,c):f?(f(b),c()):c()))}function e(a,b){var c=a.component,d=c.insert;b[B]||(b[B]=[]),b[B].indexOf(a.id)>-1||document.documentElement.contains(b)&&(b[B].push(a.id),i(b,x),d&&d(b))}function f(b){j(b,function(b){a.listeners(b).forEach(function(a){a.component.remove&&a.component.remove(b)})})}function g(){var b=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver;if(b){var c=new b(function(b){b.forEach(function(b){b.addedNodes&&b.addedNodes.length&&(a.init(b.addedNodes),k(b.addedNodes,a.init)),b.removedNodes&&b.removedNodes.length&&(f(b.removedNodes),k(b.removedNodes,f))})});return c.observe(document,{childList:!0,subtree:!0}),{addAttributeListener:function(a,c){function d(a,b,c){(a.init||a.update||a)(b,c)}function e(a,b,c,d){(a.update||a)(b,c,d)}function f(a,b,c){a.remove(b,c)}var g={},h=new b(function(b){b.forEach(function(b){var h,i,j=b.attributeName,k=a.attributes[j],l=c[j];return l?(h=g[j],k&&(i=g[j]=k.nodeValue),k&&void 0===h&&(l.init||l.update||l)?d(l,a,i):k&&void 0!==h&&(l.update||l)?e(l,a,i,h):!k&&l.remove?(delete g[j],f(l,a,h)):void 0):void 0})});h.observe(a,{attributes:!0});for(var i=0;i<a.attributes.length;i++){var j=a.attributes[i],k=c[j.nodeName];k&&d(k,a,j.nodeValue)}}}}}function h(){document.addEventListener("DOMNodeInserted",function(b){a.init(b.target,!1)}),document.addEventListener("DOMSubtreeModified",function(b){a.init(b.target,!1)}),document.addEventListener("DOMNodeRemoved",function(a){f(a.target,!1)});var b={1:function(a,b,c){(a.update||a)(b,c.newValue,c.prevValue)},2:function(a,b,c){(a.init||a.update||a)(b,c.newValue)},3:function(a,b,c){a.remove&&a.remove(b,c.prevValue)}};return{addAttributeListener:function(a,c){a.addEventListener("DOMAttrModified",function(d){var e=c[d.attrName];e&&b[d.attrChange](e,a,d)});for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d],f=c[e.nodeName];f&&b[2](f,a,{newValue:e.nodeValue})}}}}function i(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function j(a,b){a.nodeType?a=[a]:"string"==typeof a&&(a=document.querySelectorAll(s(a)));for(var c=0;c<a.length;c++)a[c]&&1===a[c].nodeType&&b(a[c],c)}function k(a,b){j(a,function(a){j(a.getElementsByTagName("*"),function(a){b(a)})})}function l(a){return(a.tagName||"").toLowerCase()}function m(a){return[].map.call(a.attributes||[],function(a){return a.nodeName})}function n(a){return(a.className||"").split(" ")}function o(a){w.sheet.insertRule(r(a)+"{display:none}",w.sheet.cssRules.length)}function p(a,b){for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c])}function q(a){return document.createElement("div").appendChild(a.cloneNode(!0)).parentNode.innerHTML}function r(a){return t(a).map(function(a){return a+":not(."+x+")"})}function s(a){return t(a).join(", ")}function t(a){return[a,"["+a+"]","."+a]}function u(b,c){var d,e={},f={};if(e[a.types.ATTR]="an attribute",e[a.types.CLASS]="a class",e[a.types.TAG]="a tag",f[a.types.ATTR]="attributes",f[a.types.CLASS]="classes",f[a.types.NOTAG]="attributes or classes",f[a.types.TAG]="tags",c.tagName.toLowerCase()===b.id?d=a.types.TAG:c.hasAttribute(b.id)?d=a.types.ATTR:c.className.split(" ").indexOf(b.id)>-1&&(d=a.types.CLASS),-1===b.component.type.indexOf(d))throw new Error('Component "'+b.id+'" was bound using '+e[d]+" and is restricted to using "+f[b.component.type]+". Element: "+q(c))}var v=document.getElementsByTagName("head")[0],w=document.createElement("style"),x="_skate",y=(function(){var a=Element.prototype.matches;return["moz","ms","o","webkit"].some(function(b){var c=b+"MatchesSelector";return Element.prototype[c]?(a=c,!0):void 0}),function(b,c){return b&&1===b.nodeType&&b[a](c)}}(),[]),z=g()||h(),A="_skate_ready_triggered",B="_skate_insert_triggered";a.types={ANY:"act",ATTR:"a",CLASS:"c",NOTAG:"ac",TAG:"t"},a.defaults={attributes:!1,extend:{},listen:!0,type:a.types.ANY},a.init=function(b){return j(b,function(b){a.listeners(b).forEach(function(a){a.init(b)})}),b},a.destroy=function(){return Object.keys(y).forEach(function(a){y[a].deafen()}),a},a.listeners=function(a){function b(a){a&&y[a]&&-1===c.indexOf(y[a])&&c.push(y[a])}var c=[],d=l(a),e=m(a),f=n(a);return b(d),e.forEach(b),f.forEach(b),c},b.prototype={init:function(a){var b=this;return j(a,function(a){u(b,a),c(b,a)}),this},listen:function(){if(y[this.id])throw new Error('Listener for "'+this.id+'" already registered.');return y[this.id]=this,this.init(this.id),this},deafen:function(){return delete y[this.id],this}},v.appendChild(w),"function"==typeof define&&define.amd?define("skate",[],function(){return a}):window.skate=a}();